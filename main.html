<!doctype html>

<html lang="en">
	<meta charset="utf-8">
	
	<head>
		<title> GIS Web App </title>
		<link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">
		
		<!-- TODO: Move to a separate .css file -->
		<style>
			.container {
				max-width: 600px;
				margin-left: auto;
				margin-right: auto;
			}

			#map-container {
				margin-right: auto;
				margin-left: auto;
				width: 100%px;
				height: 400px;
			}
		</style>

		<!-- Load API from Google Map along with the places library (in the GET request) -->
		<script src="http://maps.googleapis.com/maps/api/js?libraries=places"></script>

		<!-- Load JQuery API! -->
		<script src="js/jquery-3.0.0.min.js"> </script>

		<script>
			/* Global variables */
			var map;
			var places_service;
			var mode_input = false;
			var the_marker;

			/* Will be called after the page has been loaded */
			function init() {
				/* Initialize map variable */
				map = new google.maps.Map(
					document.getElementById("map-container"), /* Container element */
					{
						zoom: 16, disableDefaultUI: true
					}
				);

				/* Initialize the marker */
				the_marker = new google.maps.Marker({map: map});

				/* Handle clicks on map */
				map.addListener('click', function(e) {
					
					the_marker.setPosition(e.latLng);

					/* Set value of inputs in control panel */
					$('#input_lat').val(
						e.latLng.lat()
					);

					$('#input_lng').val(
						e.latLng.lng()
					);
				});



				/* Initialize places service */
				places_service = new google.maps.places.PlacesService(map);

				setPlaceByString("Sungai Raya Dalam");
			}

			function setPlaceByString(place_name) {
				places_service.textSearch(
					// Request description
					{	query: place_name	},

					// Callback function
					function(result, status) {
						position = result[0].geometry.location;
						map.setCenter(position);
					}
				);
			}

			window.onload = init;
		</script>
	</head>

	<body>
		<div class="container">
			<div class="row">
				<div class="col-md-12">
					
					<h1> Peta Reklame Sungai Raya Dalam, Kab. Kubu Raya </h1>
					
					<div class="panel panel-default">
						<div class="panel-body">
							<!-- Map panel body -->
							
							<div id="map-container">
								<!-- Contains the map loaded using Google Map API -->
							</div>

						</div>
					</div>

					<div class="panel panel-default">
						<div class="panel-heading">
							Panel Kendali
						</div>
						<div class="panel-body">
							<form>
								<div class="form-group">
									<label for="input_lat"> Garis Bujur: </label>
									<input class="form-control" placeholder="Posisi garis bujur" type="text" id="input_lat">
								</div>
								<div class="form-group">
									<label for="input_lng"> Garis Lintang: </label>
									<input class="form-control" placeholder="Posisi garis lintang" type="text" id="input_lng">
								</div>
								<input class='btn btn-primary' type='submit' value='Simpan Data Lokasi'>
							</form>
						</div>
					</div>
				</div>
			</div>
		</div>
	</body>

</html>